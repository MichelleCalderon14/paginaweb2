{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/noticias.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction AdminNoticiasCreatePage_input_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 16);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminNoticiasCreatePage_input_20_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.imagenUrl, $event) || (ctx_r1.imagenUrl = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.imagenUrl);\n  }\n}\nfunction AdminNoticiasCreatePage_input_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 17);\n    i0.ɵɵlistener(\"change\", function AdminNoticiasCreatePage_input_21_Template_input_change_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onFile($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminNoticiasCreatePage_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"img\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r4 = ctx.ngIf;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", p_r4, i0.ɵɵsanitizeUrl);\n  }\n}\nexport let AdminNoticiasCreatePage = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class AdminNoticiasCreatePage {\n    constructor(srv) {\n      this.srv = srv;\n      this.titulo = '';\n      this.texto = '';\n      this.fecha = '';\n      this.imageMode = 'url';\n      this.imagenUrl = '';\n      this.imagenB64 = '';\n    }\n    onFile(ev) {\n      const f = ev.target.files?.[0];\n      if (!f) return;\n      const r = new FileReader();\n      r.onload = () => this.imagenB64 = r.result;\n      r.readAsDataURL(f);\n    }\n    preview() {\n      return this.imageMode === 'url' ? this.imagenUrl?.trim() || null : this.imagenB64 || null;\n    }\n    crear() {\n      if (!this.titulo.trim() || !this.texto.trim()) {\n        alert('Falta título o texto');\n        return;\n      }\n      const imagen = this.imageMode === 'url' ? this.imagenUrl?.trim() || undefined : this.imagenB64 || undefined;\n      this.srv.crear({\n        titulo: this.titulo.trim(),\n        texto: this.texto.trim(),\n        fecha: this.fecha || undefined,\n        // yyyy-MM-dd\n        imagen\n      }).subscribe({\n        next: () => {\n          alert('Noticia creada ✔');\n          this.titulo = '';\n          this.texto = '';\n          this.fecha = '';\n          this.imagenUrl = '';\n          this.imagenB64 = '';\n          this.imageMode = 'url';\n        },\n        error: err => {\n          console.error(err);\n          alert('No se pudo crear la noticia');\n        }\n      });\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function AdminNoticiasCreatePage_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AdminNoticiasCreatePage)(i0.ɵɵdirectiveInject(i1.NoticiasService));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AdminNoticiasCreatePage,\n      selectors: [[\"app-admin-noticias-create\"]],\n      decls: 30,\n      vars: 14,\n      consts: [[1, \"h4\", \"mb-3\"], [1, \"card\", \"shadow-sm\"], [1, \"card-body\"], [1, \"mb-2\"], [1, \"form-label\"], [1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"rows\", \"4\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"form-label\", \"d-block\"], [\"role\", \"group\", 1, \"btn-group\", \"btn-group-sm\", \"mb-2\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [\"class\", \"form-control\", \"placeholder\", \"https://sitio.com/imagen.jpg\", 3, \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"type\", \"file\", \"class\", \"form-control\", 3, \"change\", 4, \"ngIf\"], [\"class\", \"mt-2\", 4, \"ngIf\"], [\"type\", \"date\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"d-grid\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [\"placeholder\", \"https://sitio.com/imagen.jpg\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"file\", 1, \"form-control\", 3, \"change\"], [1, \"mt-2\"], [1, \"rounded\", \"border\", 2, \"width\", \"160px\", \"height\", \"120px\", \"object-fit\", \"cover\", 3, \"src\"]],\n      template: function AdminNoticiasCreatePage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"h2\", 0);\n          i0.ɵɵtext(1, \"Crear noticia\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"label\", 4);\n          i0.ɵɵtext(6, \"T\\u00EDtulo*\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"input\", 5);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminNoticiasCreatePage_Template_input_ngModelChange_7_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.titulo, $event) || (ctx.titulo = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"div\", 3)(9, \"label\", 4);\n          i0.ɵɵtext(10, \"Texto*\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"textarea\", 6);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminNoticiasCreatePage_Template_textarea_ngModelChange_11_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.texto, $event) || (ctx.texto = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 3)(13, \"label\", 7);\n          i0.ɵɵtext(14, \"Imagen\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\", 8)(16, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function AdminNoticiasCreatePage_Template_button_click_16_listener() {\n            return ctx.imageMode = \"url\";\n          });\n          i0.ɵɵtext(17, \"URL\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function AdminNoticiasCreatePage_Template_button_click_18_listener() {\n            return ctx.imageMode = \"file\";\n          });\n          i0.ɵɵtext(19, \"Archivo\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(20, AdminNoticiasCreatePage_input_20_Template, 1, 1, \"input\", 10)(21, AdminNoticiasCreatePage_input_21_Template, 1, 0, \"input\", 11)(22, AdminNoticiasCreatePage_div_22_Template, 2, 1, \"div\", 12);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 3)(24, \"label\", 4);\n          i0.ɵɵtext(25, \"Fecha\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"input\", 13);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminNoticiasCreatePage_Template_input_ngModelChange_26_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.fecha, $event) || (ctx.fecha = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"div\", 14)(28, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function AdminNoticiasCreatePage_Template_button_click_28_listener() {\n            return ctx.crear();\n          });\n          i0.ɵɵtext(29, \"Crear noticia\");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.titulo);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.texto);\n          i0.ɵɵadvance(5);\n          i0.ɵɵclassProp(\"btn-primary\", ctx.imageMode === \"url\")(\"btn-outline-primary\", ctx.imageMode !== \"url\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassProp(\"btn-primary\", ctx.imageMode === \"file\")(\"btn-outline-primary\", ctx.imageMode !== \"file\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.imageMode === \"url\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.imageMode === \"file\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.preview());\n          i0.ɵɵadvance(4);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.fecha);\n        }\n      },\n      dependencies: [CommonModule, i2.NgIf, FormsModule, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return AdminNoticiasCreatePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}