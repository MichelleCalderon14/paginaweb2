{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./alumnos.service\";\nimport * as i2 from \"../../shared/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction DocenteAlumnosPage_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 7);\n    i0.ÉµÉµtext(1, \"Cargando alumnos\\u2026\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction DocenteAlumnosPage_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 8);\n    i0.ÉµÉµtext(1, \"No se pudieron cargar los alumnos.\");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction DocenteAlumnosPage_div_7_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"tr\")(1, \"td\");\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"td\");\n    i0.ÉµÉµtext(4);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"td\");\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"td\");\n    i0.ÉµÉµtext(8);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(9, \"td\");\n    i0.ÉµÉµtext(10);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(11, \"td\");\n    i0.ÉµÉµtext(12);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const a_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(i_r2 + 1);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(a_r1.cedula);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(a_r1.apellidos);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(a_r1.nombres);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(a_r1.fecha_nacimiento || \"\\u2014\");\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(a_r1.email || \"\\u2014\");\n  }\n}\nfunction DocenteAlumnosPage_div_7_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 13);\n    i0.ÉµÉµtext(1, \" No hay alumnos registrados para este docente. \");\n    i0.ÉµÉµelementEnd();\n  }\n}\nfunction DocenteAlumnosPage_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\")(1, \"div\", 9)(2, \"table\", 10)(3, \"thead\")(4, \"tr\")(5, \"th\");\n    i0.ÉµÉµtext(6, \"#\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"th\");\n    i0.ÉµÉµtext(8, \"C\\u00E9dula\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(9, \"th\");\n    i0.ÉµÉµtext(10, \"Apellidos\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(11, \"th\");\n    i0.ÉµÉµtext(12, \"Nombres\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(13, \"th\");\n    i0.ÉµÉµtext(14, \"Fecha nac.\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(15, \"th\");\n    i0.ÉµÉµtext(16, \"Email\");\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµelementStart(17, \"tbody\");\n    i0.ÉµÉµtemplate(18, DocenteAlumnosPage_div_7_tr_18_Template, 13, 6, \"tr\", 11);\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµtemplate(19, DocenteAlumnosPage_div_7_div_19_Template, 2, 0, \"div\", 12);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(18);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r2.alumnosFiltrados());\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", !(ctx_r2.alumnos == null ? null : ctx_r2.alumnos.length));\n  }\n}\nexport let DocenteAlumnosPage = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class DocenteAlumnosPage {\n    constructor(alumnosSrv, auth) {\n      this.alumnosSrv = alumnosSrv;\n      this.auth = auth;\n      this.alumnos = [];\n      this.cargando = false;\n      this.error = false;\n      this.filtro = '';\n    }\n    ngOnInit() {\n      const usuario = this.auth.currentUser;\n      // ðŸ”§ Map rÃ¡pido: â€œmariacabreraâ€ corresponde al docente con ID 1\n      // (cuando tengas endpoint para resolver docId por usuario, lo reemplazamos)\n      let idDocente = 0;\n      if (usuario?.username?.toLowerCase() === 'mariacabrera') {\n        idDocente = 1;\n      } else {\n        // Si te logueas con otro docente: ajusta aquÃ­ el mapeo o pon el real.\n        console.warn('Usuario distinto a mariacabrera; ajusta el idDocente aquÃ­.');\n        idDocente = 1; // de momento lo dejamos en 1 para probar\n      }\n      this.cargar(idDocente);\n    }\n    cargar(idDocente) {\n      this.cargando = true;\n      this.error = false;\n      this.alumnosSrv.listarPorDocente(idDocente).subscribe({\n        next: data => {\n          this.alumnos = data || [];\n          this.cargando = false;\n        },\n        error: () => {\n          this.error = true;\n          this.cargando = false;\n        }\n      });\n    }\n    alumnosFiltrados() {\n      const q = this.filtro.trim().toLowerCase();\n      if (!q) return this.alumnos;\n      return this.alumnos.filter(a => (a.cedula || '').toLowerCase().includes(q) || (a.nombres || '').toLowerCase().includes(q) || (a.apellidos || '').toLowerCase().includes(q) || (a.email || '').toLowerCase().includes(q));\n    }\n    static #_ = _staticBlock = () => (this.Éµfac = function DocenteAlumnosPage_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || DocenteAlumnosPage)(i0.ÉµÉµdirectiveInject(i1.AlumnosService), i0.ÉµÉµdirectiveInject(i2.AuthService));\n    }, this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: DocenteAlumnosPage,\n      selectors: [[\"app-docente-alumnos\"]],\n      decls: 8,\n      vars: 4,\n      consts: [[1, \"p-4\", \"border\", \"rounded-3\", \"shadow-sm\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-3\"], [1, \"h4\", \"mb-0\"], [\"placeholder\", \"Buscar\\u2026\", 1, \"form-control\", 2, \"max-width\", \"260px\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"alert alert-info\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"alert\", \"alert-info\"], [1, \"alert\", \"alert-danger\"], [1, \"table-responsive\"], [1, \"table\", \"table-sm\", \"align-middle\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"alert alert-warning mb-0\", 4, \"ngIf\"], [1, \"alert\", \"alert-warning\", \"mb-0\"]],\n      template: function DocenteAlumnosPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n          i0.ÉµÉµtext(3, \"Mis alumnos\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(4, \"input\", 3);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function DocenteAlumnosPage_Template_input_ngModelChange_4_listener($event) {\n            i0.ÉµÉµtwoWayBindingSet(ctx.filtro, $event) || (ctx.filtro = $event);\n            return $event;\n          });\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµtemplate(5, DocenteAlumnosPage_div_5_Template, 2, 0, \"div\", 4)(6, DocenteAlumnosPage_div_6_Template, 2, 0, \"div\", 5)(7, DocenteAlumnosPage_div_7_Template, 20, 2, \"div\", 6);\n          i0.ÉµÉµelementEnd();\n        }\n        if (rf & 2) {\n          i0.ÉµÉµadvance(4);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.filtro);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", ctx.cargando);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", ctx.error);\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngIf\", !ctx.cargando && !ctx.error);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, FormsModule, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return DocenteAlumnosPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}