{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../alumnos/alumnos.service\";\nimport * as i2 from \"../../shared/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nexport let DocenteCrearPage = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class DocenteCrearPage {\n    constructor(alumnosSrv, auth, router) {\n      this.alumnosSrv = alumnosSrv;\n      this.auth = auth;\n      this.router = router;\n      // usamos Partial para que todo sea opcional mientras escribes\n      this.form = {\n        cedula: '',\n        nombres: '',\n        apellidos: '',\n        fecha_nacimiento: '',\n        email: ''\n      };\n    }\n    /** ðŸ”¹ Por ahora mapeamos usuario â†’ idDocente â€œa manoâ€ */\n    getDocenteId() {\n      const usuario = this.auth.currentUser;\n      const userName = usuario?.username?.toLowerCase() || '';\n      if (userName === 'mariacabrera') {\n        return 1;\n      }\n      // aquÃ­ luego podrÃ¡s mapear otros usuarios a otros docentes\n      console.warn('getDocenteId: usuario distinto a mariacabrera, usando id_docente=1 por ahora');\n      return 1;\n    }\n    guardar() {\n      if (!this.form.cedula?.trim() || !this.form.nombres?.trim() || !this.form.apellidos?.trim()) {\n        alert('CÃ©dula, nombres y apellidos son obligatorios');\n        return;\n      }\n      const idDocente = this.getDocenteId();\n      const payload = {\n        cedula: this.form.cedula.trim(),\n        nombres: this.form.nombres.trim(),\n        apellidos: this.form.apellidos.trim(),\n        fecha_nacimiento: this.form.fecha_nacimiento || undefined,\n        email: this.form.email?.trim() || undefined\n      };\n      this.alumnosSrv.crearParaDocente(idDocente, payload).subscribe({\n        next: resp => {\n          console.log('Alumno creado', resp);\n          alert('Alumno creado correctamente âœ”');\n          // despuÃ©s de crear, te llevo a la lista de alumnos\n          this.router.navigate(['/docente/alumnos']);\n        },\n        error: err => {\n          console.error('[DocenteCrearPage] error al crear alumno', err);\n          alert('âŒ No se pudo crear el alumno. Revisa que el backend estÃ© levantado.');\n        }\n      });\n    }\n    volver() {\n      this.router.navigate(['/panel-docente']);\n    }\n    static #_ = _staticBlock = () => (this.Éµfac = function DocenteCrearPage_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || DocenteCrearPage)(i0.ÉµÉµdirectiveInject(i1.AlumnosService), i0.ÉµÉµdirectiveInject(i2.AuthService), i0.ÉµÉµdirectiveInject(i3.Router));\n    }, this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: DocenteCrearPage,\n      selectors: [[\"app-docente-crear\"]],\n      decls: 31,\n      vars: 5,\n      consts: [[1, \"p-4\", \"border\", \"rounded-3\", \"shadow-sm\"], [1, \"h4\", \"mb-3\"], [3, \"ngSubmit\"], [1, \"mb-2\"], [1, \"form-label\"], [\"name\", \"cedula\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"mb-2\", \"row\"], [1, \"col-md-6\"], [\"name\", \"nombres\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"apellidos\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"date\", \"name\", \"fecha_nacimiento\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"email\", \"name\", \"email\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"d-flex\", \"gap-2\", \"mt-3\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"click\"]],\n      template: function DocenteCrearPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ÉµÉµtext(2, \"Crear alumno\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(3, \"form\", 2);\n          i0.ÉµÉµlistener(\"ngSubmit\", function DocenteCrearPage_Template_form_ngSubmit_3_listener() {\n            return ctx.guardar();\n          });\n          i0.ÉµÉµelementStart(4, \"div\", 3)(5, \"label\", 4);\n          i0.ÉµÉµtext(6, \"C\\u00E9dula*\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(7, \"input\", 5);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function DocenteCrearPage_Template_input_ngModelChange_7_listener($event) {\n            i0.ÉµÉµtwoWayBindingSet(ctx.form.cedula, $event) || (ctx.form.cedula = $event);\n            return $event;\n          });\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"label\", 4);\n          i0.ÉµÉµtext(11, \"Nombres*\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(12, \"input\", 8);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function DocenteCrearPage_Template_input_ngModelChange_12_listener($event) {\n            i0.ÉµÉµtwoWayBindingSet(ctx.form.nombres, $event) || (ctx.form.nombres = $event);\n            return $event;\n          });\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(13, \"div\", 7)(14, \"label\", 4);\n          i0.ÉµÉµtext(15, \"Apellidos*\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(16, \"input\", 9);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function DocenteCrearPage_Template_input_ngModelChange_16_listener($event) {\n            i0.ÉµÉµtwoWayBindingSet(ctx.form.apellidos, $event) || (ctx.form.apellidos = $event);\n            return $event;\n          });\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(17, \"div\", 6)(18, \"div\", 7)(19, \"label\", 4);\n          i0.ÉµÉµtext(20, \"Fecha de nacimiento\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(21, \"input\", 10);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function DocenteCrearPage_Template_input_ngModelChange_21_listener($event) {\n            i0.ÉµÉµtwoWayBindingSet(ctx.form.fecha_nacimiento, $event) || (ctx.form.fecha_nacimiento = $event);\n            return $event;\n          });\n          i0.ÉµÉµelementEnd()();\n          i0.ÉµÉµelementStart(22, \"div\", 7)(23, \"label\", 4);\n          i0.ÉµÉµtext(24, \"Email\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(25, \"input\", 11);\n          i0.ÉµÉµtwoWayListener(\"ngModelChange\", function DocenteCrearPage_Template_input_ngModelChange_25_listener($event) {\n            i0.ÉµÉµtwoWayBindingSet(ctx.form.email, $event) || (ctx.form.email = $event);\n            return $event;\n          });\n          i0.ÉµÉµelementEnd()()();\n          i0.ÉµÉµelementStart(26, \"div\", 12)(27, \"button\", 13);\n          i0.ÉµÉµtext(28, \"Guardar alumno\");\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(29, \"button\", 14);\n          i0.ÉµÉµlistener(\"click\", function DocenteCrearPage_Template_button_click_29_listener() {\n            return ctx.volver();\n          });\n          i0.ÉµÉµtext(30, \"Volver\");\n          i0.ÉµÉµelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ÉµÉµadvance(7);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.form.cedula);\n          i0.ÉµÉµadvance(5);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.form.nombres);\n          i0.ÉµÉµadvance(4);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.form.apellidos);\n          i0.ÉµÉµadvance(5);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.form.fecha_nacimiento);\n          i0.ÉµÉµadvance(4);\n          i0.ÉµÉµtwoWayProperty(\"ngModel\", ctx.form.email);\n        }\n      },\n      dependencies: [CommonModule, FormsModule, i4.ÉµNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return DocenteCrearPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}